<!DOCTYPE html>
<html lang="en">

<head>
    <title>Matcha</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDc3Tx5tuzRnZ8KGgKRIdvHyi-6oTyZPCE&libraries=places"></script>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.boots^^^^^^^^^^trapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <script src="http://bootstrap-tagsinput.github.io/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"></script>
    <script type="text/javascript" src="https://cdn.socket.io/socket.io-1.4.5.js"></script>

    <script>
    $(function(){
      $("#chat").load("templates/chat_box.html");
    });
    </script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://bootstrap-tagsinput.github.io/bootstrap-tagsinput/dist/bootstrap-tagsinput.css">

    <link rel="stylesheet" type="text/css" href="css/suggestions.css"/>
</head>

<body>

    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Home</a>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="suggestions">Suggestions</a>
                    </li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li>
                      <a href="disconnect">Disconnect</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">

        <div class="row">

            <div class="col-lg-8">
                <h1>Matcha</h1>

                <hr>
                <div class="container">
                  <div class="row">
                        <div class="col-lg-8" >
                          <div class="well">
                            <h3>Advanced Search</h3>
                              <div class="form-group">
                                <div class="col-lg-6">
                                  Age Range<input id="age_min" type="number" value="" max="100" min="18" step="1">
                                  <input id="age_max" type="number" value="" max="100" min="18" step="1">
                                </div>
                              </div>
                              <div class="form-group">
                                <div class="col-lg-6">
                                  Popularity Range<input id="pop_min" type="number" value="" max="100" min="18" step="1">
                                  <input id="pop_max" type="number" value="" max="100" min="18" step="1">
                                </div>
                              </div>
                              <div class="form-group">
                                <div class="col-lg-6">
                                  Localisation<input id="geoloc" class="controls" type="text" placeholder="City" value="" >
                                </div>
                              </div>
                              <div class="form-group">
                                <div class="col-lg-6">
                                  Filter<select id="sort" class="selectpicker">
                                          <option value="age">Age</option>
                                          <option value="loc">Location</option>
                                          <option value="pop">Popularity</option>
                                          <option value="tag">Interests</option>
                                        </select>

                                </div>
                              </div>
                              <div class="form-group">
                                  <input id="interests" type="text" value="" data-role="tagsinput" placeholder="Interests">
                              </div>
                              <div class="form-group">
                                <button id="search" class="btn btn-default" type="submit">
                                  <span class="glyphicon glyphicon-search"></span>
                                </button>
                              </div>
                          </div>

                          <%
                            if (locals.users)
                              for (var i=0; i < users.length; i++) {
                          %>
                          <div class="col-md-3 col-lg-3 " align="center">
                          <div class="panel panel-info">
                            <div class="panel-heading" onclick="javascript:location.href='user?username=<%= users[i].username %>'">
                              <h3 class="panel-title"><%= users[i].firstname + " " + users[i].lastname %></h3>
                            </div>
                            <div class="panel-body" onclick="javascript:location.href='user?username=<%= users[i].username %>'">
                              <div class="row">

                                  <img id="profile_pic" alt="profile picture"
                                    src="<%if (users[i].profile_pic) {%>
                                          <%= users[i]["picture" + users[i].profile_pic] %>
                                       <% } else { %>
                                          img/profile_default.jpg
                                       <% } %>"
                                    class="img-circle img-responsive">

                              </div>
                            </div>
                            <div class="panel-footer">
                              <a id="<%= users[i].username %>" onclick="javascript:location.href='chat?username=<%= users[i].username %>'" data-original-title="Chat" data-toggle="tooltip" type="button" class="chat_b btn btn-sm btn-primary"><i class="glyphicon glyphicon-envelope"></i></a>
                              <% if (locals.me && me.profile_pic && me.profile_pic !== "") { %>
                                <a id="<%= users[i].username %>" data-original-title="Like" onclick="javascript:like('<%= users[i].username %>')" data-toggle="tooltip" type="button" class="like_b btn btn-sm btn-danger"><i class="glyphicon glyphicon-heart"></i></a>
                              <% } %>
                              <span class="pull-right">
                                <a data-original-title="Report" data-toggle="tooltip" type="button" class="btn btn-sm btn-danger"><i class="glyphicon glyphicon-remove"></i></a>
                              </span>
                            </div>
                          </div>
                        </div>
                          <% } %>
                        </div>
                      </div>
                    </div>
            </div>

            <div class="col-md-4">

                <!-- <div class="well">
                    <h4>Search Profile</h4>
                    <form action="suggestions" method="get" class="input-group">
                        <input name="username" type="text" class="form-control">
                        <span class="input-group-btn">
                          <button class="btn btn-default" type="submit">
                            <span class="glyphicon glyphicon-search"></span>
                          </button>
                        </span>
                    </form>
                </div> -->

                <div class="well">
                    <h4>Notification</h4>
                    <div class="row">
                        <div class="col-lg-6">
                            <ul class="list-unstyled">
                                <li><a href="#">Stuff</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="well">

                </div>
            </div>
        </div>

        <hr>

        <div id="chat"></div>

        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>Copyright &copy; Matcha 2017</p>
                </div>
            </div>
        </footer>

    </div>

</body>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/9.7.1/bootstrap-slider.js"></script>
<script type='text/javascript' >
  var users = <%- JSON.stringify(users) %>;
  var me = <%- JSON.stringify(me) %>;
</script>
<script type="text/javascript" src="js/suggestions.js"></script>
</html>
